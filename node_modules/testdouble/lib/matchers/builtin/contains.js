"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var lodash_1 = require("../../wrap/lodash");
var create_1 = require("../create");
var is_matcher_1 = require("../is-matcher");
exports.default = create_1.default({
    name: 'contains',
    matches: function (containings, actualArg) {
        if (containings.length === 0)
            return false;
        return lodash_1.default.every(containings, function (containing) {
            return argumentContains(containing, actualArg);
        });
    }
});
var argumentContains = function (containing, actualArg) {
    if (lodash_1.default.isArray(containing)) {
        return lodash_1.default.some(actualArg, function (actualElement) { return lodash_1.default.isEqual(actualElement, containing); });
    }
    else if (lodash_1.default.isRegExp(containing)) {
        return containing.test(actualArg);
    }
    else if (is_matcher_1.default(containing)) {
        return lodash_1.default.some(actualArg, containing.__matches);
    }
    else if (lodash_1.default.isObjectLike(containing) && lodash_1.default.isObjectLike(actualArg)) {
        return containsPartialObject(containing, actualArg);
    }
    else {
        return lodash_1.default.includes(actualArg, containing);
    }
};
var containsPartialObject = function (containing, actual) {
    return actual != null && lodash_1.default.every(containing, function (val, key) {
        if (is_matcher_1.default(val)) {
            return val.__matches(actual[key]);
        }
        else if (lodash_1.default.isObjectLike(val)) {
            return containsPartialObject(val, actual[key]);
        }
        else {
            return lodash_1.default.isEqual(val, actual[key]);
        }
    });
};
